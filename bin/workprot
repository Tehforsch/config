# This script opens a latexfile in vim so you can edit it while opening okular in the background and running when-changed inputfile parse inputfile
if [ $# = 0 ]
then 
    inputFile='input.tex'
else
    inputFile=$1
fi

outputFile='output.pdf'
# If the output file does not exist copy a dummy file to the output eps file so okular thinks it does.
echo $inputFile
echo $outputFile
if [ ! -f $outputFile ]; then
    cp ~/.usrconfig/resources/dummy.eps $outputFile
fi
# Start okular and redirect standard output into the infinite void
okular $outputFile &> /dev/null
# Start an extra terminal and open the plot file in it
gnome-terminal --working-directory=WORK_DIR -x zsh -c "cd $(pwd); vim $inputFile; zsh"    
# Watch for changes in the latex file and parse if necessary
echo "when-changed $inputFile 'clear && python ~/Projects/cautotex/parse.py'"
when-changed $inputFile "clear && python ~/Projects/cautotex/parse.py"
